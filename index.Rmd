---
# TODO: insert powerpoint coverslide manually
title: "Data wrangling & manipulation in R"
subtitle: "Dept. Biological Sciences Postgraduate Workshop"
author: "Ruan van Mazijk, MSc candidate"
date: "`r Sys.Date()`"
mainfont: Avenir
monofont: Consolas
#highlight: "tango"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE)
library(tidyverse)
library(emo)
```

# Motivation

\pause

```{r data-collection-scenario, echo=FALSE, out.width="7cm", fig.cap="An example data-collection scenario in biology"}
knitr::include_graphics("images/motivating-example/data-collection-scenario_crop.png")
```

***

```{r motivating-example-1, echo=FALSE, out.width="10cm", fig.cap="One way to lay out your collected data..."}
knitr::include_graphics("images/motivating-example/motivating-example-1.png")
```

***

```{r motivating-example-2, echo=FALSE, out.width="10cm", fig.cap="Another way..."}
knitr::include_graphics("images/motivating-example/motivating-example-2.png")
```

***

```{r motivating-example-3, echo=FALSE, out.width="7cm", fig.cap="The \"best\" way. Will make your life easiest in the long-term."}
knitr::include_graphics("images/motivating-example/motivating-example-3.png")
```

# Workshop outline

>- Embracing the rectangle
>- **Making** your data rectangular
>- Things to see & do in rectangle land
>- `mutate()` & friends---How to extend your raw dataset
>- ~~Complicated~~ Exotic problems

# Embracing the rectangle

<!--
TOC:
- Long vs wide data
- The advantages of rectangular data
-->

\pause

## Long vs wide data

Remember this?

```{r motivating-example-again, echo=FALSE, out.width="10cm"}
knitr::include_graphics("images/motivating-example/motivating-example-1.png")
```

\pause

This is _wide-form_ data. Let's move away from that...

Using the `iris` dataset built into R!

***

## Wide-form data

\pause

```{r wide-output, echo=FALSE}
iris %>%
  split(.$Species) %>%
  map(select, -Species) %>%
  map(slice, 1:2)
```

***

## Classic long-form data

\pause

```{r long-output, echo=FALSE}
iris %>%
  group_by(Species) %>%
  slice(1:3) %>%
  select(Species, Sepal.Length:Petal.Width) %>%
  as.data.frame()
```

```{r, echo=FALSE, out.width="5cm", fig.cap="Another way..."}
knitr::include_graphics("images/motivating-example/motivating-example-2.png")
```

***

## We can get longer...

\pause

```{r very-long-output, echo=FALSE}
iris %>%
  group_by(Species) %>%
  slice(1) %>%
  gather(trait, trait_value, -Species) %>%
  ungroup() %>%
  slice(1:15) %>%
  as.data.frame()
```

***

## The advantages of long data

>- Machine-readable
>- The standard for most software/R-functions \
   (e.g. `lm()`, `plot()`, `ggplot()`)
>- How most statistical methods treat data mathematically
>- Easier to subset & wrangle further!

# **Making** your data rectangular

\pause

## What are your options?

Easiest to lay it out like that from the start...

Tools to follow assume your data is nice & _tidy_

# Things to see & do in rectangle land

# `mutate()` & friends

How to extend your raw dataset

# ~~Complicated~~ Exotic problems
